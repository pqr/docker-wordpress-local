# docker-wordpress-local
Для запуска перейти в директорию, где находится docker-compose.yml файл, выполнить команду:
```
docker-compose up --build
```
В этот момент запускается два контейнера:
1. Apache+PHP+Wordpress
2. MySQL
(на экране остаётся окно терминала виден процесс работы этих контейнеров, окно закрывать не нужно).

Также содержимое директории с исходными кодами Wordpress магическим образом копируется из контейнера на хост-машину в директорию `wordpress`.

Сайт доступен по адерсу http://localhost:8080

Для остановки контейнеров нужно закрыть окно терминала (или нажать Ctrl+C).
После остановки контейнеров локальные файлы в директории `wordpress` не пропадают, все изменения останоутся на локальном жестком диске.

При следующем запуске `docker-compose up`, контейнер Apache+PHP+Wordpress будет использовать файлы уже имеющиеся локальной директории `wordpress`.

Таким образом можно локально работать над PHP кодом в директории wordpress (например, менять темы, устанавливать плагины) - эти наработки не пропадут при перезапуске контейнеров.

Если нужно сбросить все локальный наработки и вернуться к исходнымому состоянию дистрибутива, достаточно удалить локальную директорию `wordpress` на хост-машине и при следующем запуске `docker-compose up` эта директория будет автоматически создана и заполнена исходниками из дистрибутива.

## Настройка php.ini
В этом репозитории присутсвует файл `php.ini`, который при запуске контейнера (Apache+PHP+Wordpress) автоматически помещается внуть контейнера в директорию `/usr/local/etc/php/php.ini`.

Изменения в файле `php.ini` на локальном диске автоматически попдут в запущенный контейнер, однако нужно перезапустить сам Apache, чтобы mod_php подхватил новые настройки. Проще всего перезапустить Apache перезапуском всего контейнера.

Чтобы проверить, подключились ли настройки сделанные в `php.ini`, можно создать в файл `wordpress/phpinfo.php` со следующим содержанием:
```php
<?php
phpinfo();
```
и после этого открыть страницу в браузере: `http://localhost:8080/phpinfo.php`. На этой же странице можно проверить подключены ли все необходимые php модули, например, mbstring и xml. 

## Настройка wp-config.php
Если требуется внести дополнительные настройки в `wp-config.php`, то после первого запуска контейнера, когда директория `wordpress` появится на локальном диске, можно просто отредактировать файл `wordpress/wp-config.php` - все изменения попадут внутрь запущенного контейнера без перезагрузки, т.к. вся папка `wordpress` в режиме реального времени синхронизируется с контейнером.  
